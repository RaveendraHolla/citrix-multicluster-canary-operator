apiVersion: apps/v1
kind: Deployment
metadata:
  name: gtp-listener
  labels:
    app: gtp-listener
spec:
  selector:
    matchLabels:
      app: gtp-listener
  template:
    metadata:
      labels:
        app: gtp-listener
    spec:
      serviceAccountName: gl-k8s-role
      containers:
      - name: gtp-listener
        image: citrix-gtp-listener
        imagePullPolicy: IfNotPresent
        # command: [ "/bin/bash", "-c", "--" ]
        # args: [ "apt-get -y install vim;while true; do sleep 30; done;" ]
        env:
          - name: res_namespace
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
          - name: "External_kubernetes_url"
            value: "https://10.106.143.146:6443"
          - name: "External_Kuubernetes_jwt_token"
            value: "(BEARER TOKEN FOR EXTERNAL KUBERNETES URL"
